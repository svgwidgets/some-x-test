/**
 * Visual Definition System
 * 
 * Defines the visual appearance of P&ID components using SVG.
 * Separates visual representation from I/O logic for maximum reusability.
 */

export interface Position {
  x: number;
  y: number;
}

export interface ViewBox {
  width: number;
  height: number;
}

export interface PortDefinition {
  /** Unique port identifier */
  id: string;
  
  /** Port type (inlet, outlet, etc.) */
  type: 'inlet' | 'outlet' | 'bidirectional';
  
  /** Position relative to component origin */
  position: Position;
  
  /** Optional: Port angle in degrees */
  angle?: number;
}

export interface ColorTarget {
  /** Element ID or class to target */
  selector: string;
  
  /** Property to modify (fill, stroke, etc.) */
  property: 'fill' | 'stroke';
  
  /** Default color */
  defaultColor: string;
}

export interface VisualDefinition {
  /** Unique visual identifier */
  id: string;
  
  /** Display name */
  name: string;
  
  /** Category for grouping */
  category: string;
  
  /** SVG path data or complete SVG markup */
  svg: string;
  
  /** ViewBox dimensions */
  viewBox: ViewBox;
  
  /** Connection ports */
  ports: PortDefinition[];
  
  /** Elements that can change color based on state */
  colorTargets?: ColorTarget[];
  
  /** Optional: Animation targets */
  animationTargets?: string[];
  
  /** Optional: Icon for palette (emoji or small SVG) */
  icon?: string;
  
  /** Optional: Description */
  description?: string;
}

/**
 * Visual metadata for categorization
 */
export interface VisualMetadata {
  id: string;
  name: string;
  category: string;
  icon?: string;
  description?: string;
}

/**
 * Get metadata from visual definition
 */
export function getVisualMetadata(visual: VisualDefinition): VisualMetadata {
  return {
    id: visual.id,
    name: visual.name,
    category: visual.category,
    icon: visual.icon,
    description: visual.description,
  };
}
